<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mypet.mapper.FreeBoardMapper">
	
	 <select id="getList" resultType="com.mypet.domain.FreeVO">
	 	<![CDATA[
	 		select * from free where f_no > 0
	 		]]>
	 </select>
	 
	 <select id="getListWithPaging" resultType="com.mypet.domain.FreeVO">
	 		<![CDATA[
	 			select f_no, f_title, f_content, f_photo, f_writer, f_date, f_udate
	 			from(
	 			select /*+INDEX_DESC(free pk_free) */
	 				rownum rn, f_no, f_title, f_content, f_photo, f_writer, f_date, f_udate
	 			from
	 				free
	 			where rownum <= #{pageNum} *#{amount}
	 			)
	 			where rn > (#{pageNum} -1 ) * #{amount}
	 		]]>
	 </select>
	
	<insert id="insert">
		insert into free(f_no, f_title, f_content, f_photo, f_writer) 
		values(seq_free.nextval, #{f_title}, #{f_content}, #{f_photo}, #{f_writer})
	</insert>
	
	<select id="read" resultType="com.mypet.domain.FreeVO">
		select * from free where f_no = #{f_no}
	</select>
	
	<delete id="delete" >
		delete free where f_no = #{f_no}
	</delete>
	
	<update id="update">
		update free
		set f_title = #{f_title},
		f_content = #{f_content},
		f_photo = #{f_photo},
		f_writer = #{f_writer},
		f_udate = sysdate
		where f_no = #{f_no}
	</update>

	<select id="getTotalCount" resultType="int">
		select count(*) from free where f_no > 0
	</select>

</mapper>